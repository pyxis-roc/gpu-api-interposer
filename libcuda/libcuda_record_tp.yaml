---
main:
  provider: "libcuda_interposer"
includes:
  system:
    - cuda.h
common_args:
  - retval_arg: &retval_arg
      _retval: 
        type: CUresult *
common_fields:
  - retval_field: &retval_field
      _retval: 
        type: ctf_integer
        type_args:
          int_type: CUresult
          expr: "*_retval"
tracepoint_events:
  cuDriverGetVersion_post:
    fields:
      - driverVersion:
          type: ctf_integer
          type_args:
            int_type: int
            expr: "*driverVersion"
      - *retval_field
  cuDriverGetVersion_pre:
    fields:
      - driverVersion:
          type: ctf_integer_hex
          type_args:
            int_type: intptr_t
            expr: "driverVersion"
  cuGetErrorString_post:
    fields:
      - error:
          type: ctf_integer
          type_args:
            int_type: CUresult
            expr: error
      - pStr_contents:
          type: ctf_string
          type_args:
            field_name: pStr_contents
            expr: '(*pStr == NULL) ? "" : *pStr'
      - *retval_field
  cuMemAlloc_v2_pre:
    fields:
      - dptr: 
          type: ctf_integer_hex
          type_args:
            int_type: intptr_t
            expr: dptr
      - bytesize:
          type: ctf_integer
          type_args:
            int_type: size_t
            expr: bytesize
  cuMemAlloc_v2_post:
    fields:
      - dptr_contents: 
          type: ctf_integer_hex
          type_args:
            int_type: intptr_t
            expr: "*dptr"
      - *retval_field
  cuCtxGetCurrent_post:
    fields:
      - pctx:
          type: ctf_integer_hex
          type_args:
            int_type: intptr_t
            expr: pctx
      - *retval_field
  cuCtxGetDevice_post:
    fields:
      - device_contents:
          type: ctf_integer
          type_args:
            int_type: CUdevice
            expr: "*device"
      - *retval_field
  cuCtxSynchronize_post:
    fields:
      - *retval_field
  cuDeviceGetAttribute_post:
    fields:
      - pi:
          type: ctf_integer
          type_args:
            int_type: int
            expr: "*pi"
      - attrib:
          type: ctf_integer
          type_args:
            int_type: CUdevice_attribute
      - dev:
          type: ctf_integer
          type_args:
            int_type: CUdevice
      - *retval_field
      